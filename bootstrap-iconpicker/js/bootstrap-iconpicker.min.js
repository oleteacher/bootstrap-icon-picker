(function(n){"use strict";var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,this.$element.data());this.options=n.extend({},this.options,r)},i;t.ICONSET_EMPTY={iconClass:"",iconClassFix:"",icons:[]};t.ICONSET={_custom:null,elusiveicon:n.iconset_elusiveicon||t.ICONSET_EMPTY,fontawesome:n.iconset_fontawesome||t.ICONSET_EMPTY,ionicon:n.iconset_ionicon||t.ICONSET_EMPTY,glyphicon:n.iconset_glyphicon||t.ICONSET_EMPTY,mapicon:n.iconset_mapicon||t.ICONSET_EMPTY,octicon:n.iconset_octicon||t.ICONSET_EMPTY,typicon:n.iconset_typicon||t.ICONSET_EMPTY,weathericon:n.iconset_weathericon||t.ICONSET_EMPTY};t.DEFAULTS={arrowClass:"btn-primary",arrowNextIconClass:"glyphicon glyphicon-arrow-right",arrowPrevIconClass:"glyphicon glyphicon-arrow-left",cols:4,icon:"",iconset:"glyphicon",labelHeader:"{0} / {1}",labelFooter:"{0} - {1} of {2}",placement:"bottom",rows:4,search:!0,searchText:"Search icon",selectedClass:"btn-warning",unselectedClass:"btn-default"};t.prototype.bindEvents=function(){var t=this.options,i=this;t.table.find(".btn-previous, .btn-next").off("click").on("click",function(){var r=parseInt(n(this).val(),10);i.changeList(t.page+r)});t.table.find(".btn-icon").off("click").on("click",function(){i.select(n(this).val());i.$element.popover("destroy")});t.table.find(".search-control").off("keyup").on("keyup",function(){i.changeList(1)})};t.prototype.matchEx=function(n,t){return t===n.icon||t===n.iconClassFix+n.icon||t===n.iconClass+" "+n.iconClassFix+n.icon||t.replace(n.iconClassFix,"")==n.icon};t.prototype.changeList=function(n){this.filterIcons();this.updateLabels(n);this.updateIcons(n);this.options.page=n;this.bindEvents()};t.prototype.filterIcons=function(){var t=this.options,r=t.table.find(".search-control").val(),i;r===""?t.icons=t.cacheset:(i=[],n.each(t.cacheset,function(n,t){t.icon.indexOf(r)>-1&&i.push(t)}),t.icons=i)};t.prototype.removeAddClass=function(n,t,i){return this.options.table.find(n).removeClass(t).addClass(i),i};t.prototype.reset=function(){this.updatePicker();this.changeList(1)};t.prototype.select=function(n){for(var r,t=this.options,u=this.$element,i=0;i<t.icons.length;i++)if(this.matchEx(t.icons[i],n)){n=t.icons[i];t.selected=i;break}t.selected===-1&&(t.selected=0,n=t.icons[t.selected]);n!==""&&t.selected>=0&&(r="",r=t.iconset.length>1?n.iconClass+" "+n.iconClassFix+n.icon:n.iconClassFix+n.icon,t.icon=r,u.find("input").val(r),u.find("i").attr("class","").addClass(n.iconClass).addClass(n.iconClassFix+n.icon),u.trigger({type:"change",icon:r}),t.table.find("button."+t.selectedClass).removeClass(t.selectedClass))};t.prototype.switchPage=function(n){for(var r,t=this.options,i=0;i<t.icons.length;i++)if(this.matchEx(t.icons[i],n)){n=t.icons[i];t.selected=i;break}t.selected===-1&&n==="";n!==""&&t.selected>=0&&(r=Math.ceil((t.selected+1)/this.totalIconsPerPage()),this.changeList(r));t.table.find("i."+n.iconClassFix+n.icon).parent().addClass(t.selectedClass)};t.prototype.totalPages=function(){return Math.ceil(this.totalIcons()/this.totalIconsPerPage())};t.prototype.totalIcons=function(){return this.options.icons.length};t.prototype.totalIconsPerPage=function(){return this.options.cols*this.options.rows};t.prototype.updateArrows=function(n){var t=this.options,i=this.totalPages();n===1?t.table.find(".btn-previous").addClass("disabled"):t.table.find(".btn-previous").removeClass("disabled");n===i||i===0?t.table.find(".btn-next").addClass("disabled"):t.table.find(".btn-next").removeClass("disabled")};t.prototype.updateIcons=function(t){for(var s,u,h,f,r,e,i=this.options,c=i.table.find("tbody").empty(),l=(t-1)*this.totalIconsPerPage(),o=0;o<i.rows;o++){for(s=n("<tr><\/tr>"),u=0;u<i.cols;u++)h=l+o*i.cols+u,f=n('<button class="btn '+i.unselectedClass+' btn-icon"><\/button>').hide(),h<i.icons.length&&(r=i.icons[h],e=r.iconClassFix+r.icon,f.val(e).attr("title",e).append('<i class="'+r.iconClass+" "+e+'"><\/i>').data("icon-picker-icon",r).show(),this.matchEx(r,i.icon)&&(console.log("matched"),f.addClass(i.selectedClass).addClass("btn-icon-selected"))),s.append(n("<td><\/td>").append(f));c.append(s)}};t.prototype.updateIconsCount=function(){var n=this.options,t=["<tr>",'   <td colspan="'+n.cols+'" class="text-center">','       <span class="icons-count"><\/span>',"   <\/td>","<\/tr>"];n.table.find("tfoot").empty().append(t.join(""))};t.prototype.updateLabels=function(n){var t=this.options,i=this.totalIcons(),u=this.totalPages(),f,r;t.table.find(".page-count").html(t.labelHeader.replace("{0}",u===0?0:n).replace("{1}",u));f=(n-1)*this.totalIconsPerPage();r=n*this.totalIconsPerPage();t.table.find(".icons-count").html(t.labelFooter.replace("{0}",f+1).replace("{1}",r<i?r:i).replace("{2}",i));this.updateArrows(n)};t.prototype.updatePagesCount=function(){for(var r,f,t=this.options,u=n("<tr><\/tr>"),i=0;i<t.cols;i++)r=n('<td class="text-center"><\/td>'),i===0||i===t.cols-1?(f=['<button class="btn btn-arrow '+(i===0?"btn-previous":"btn-next")+" "+t.arrowClass+'" value="'+(i===0?-1:1)+'">','<span class="'+(i===0?t.arrowPrevIconClass:t.arrowNextIconClass)+'"><\/span>',"<\/button>"],r.append(f.join("")),u.append(r)):u.find(".page-count").length===0&&(r.attr("colspan",t.cols-2).append('<span class="page-count"><\/span>'),u.append(r));t.table.find("thead").empty().append(u)};t.prototype.updatePicker=function(){var n=this.options;if(n.cols<4)throw"Iconpicker => The number of columns must be greater than or equal to 4. [option.cols = "+n.cols+"]";else if(n.rows<1)throw"Iconpicker => The number of rows must be greater than or equal to 1. [option.rows = "+n.rows+"]";else this.updatePagesCount(),this.updateSearch(),this.updateIconsCount()};t.prototype.updateSearch=function(){var t=this.options,i=["<tr>",'   <td colspan="'+t.cols+'">','       <input type="text" class="form-control search-control" style="width: '+t.cols*39+'px;" placeholder="'+t.searchText+'">',"   <\/td>","<\/tr>"];i=n(i.join(""));t.search===!0?i.show():i.hide();t.table.find("thead").append(i)};t.prototype.setArrowClass=function(n){this.options.arrowClass=this.removeAddClass(".btn-arrow",this.options.arrowClass,n)};t.prototype.setArrowNextIconClass=function(n){this.options.arrowNextIconClass=this.removeAddClass(".btn-next > span",this.options.arrowNextIconClass,n)};t.prototype.setArrowPrevIconClass=function(n){this.options.arrowPrevIconClass=this.removeAddClass(".btn-previous > span",this.options.arrowPrevIconClass,n)};t.prototype.setCols=function(n){this.options.cols=n;this.reset()};t.prototype.setIcon=function(n){this.select(n)};t.prototype.setIconset=function(i){var f=this.options,i=[].concat(i),r=[],e=0,u;n.each(i,function(i,u){var f,o;n.isPlainObject(u)?(e++,f=String("_custom"+String(e)),t.ICONSET[f]=n.extend(t.ICONSET_EMPTY,u),r.push(f)):(o=u.split(/\|/gi),n.each(o,function(n,i){t.ICONSET.hasOwnProperty(i)?r.push(i):(t.ICONSET[i]=t.DEFAULTS.iconset,r.pust(i))}))});this.options.iconset=r;u=[];n.each(f.iconset,function(i,r){var f=t.ICONSET[r];n.each(f.icons,function(n,t){u.push({icon:t,iconClass:f.iconClass,iconClassFix:f.iconClassFix})})});this.options.cacheset=u;this.reset();this.select(f.icon)};t.prototype.setLabelHeader=function(n){this.options.labelHeader=n;this.updateLabels(this.options.page)};t.prototype.setLabelFooter=function(n){this.options.labelFooter=n;this.updateLabels(this.options.page)};t.prototype.setPlacement=function(n){this.options.placement=n};t.prototype.setRows=function(n){this.options.rows=n;this.reset()};t.prototype.setSearch=function(n){var t=this.options.table.find(".search-control");n===!0?t.show():t.hide();t.val("");this.changeList(1);this.options.search=n};t.prototype.setSearchText=function(n){this.options.table.find(".search-control").attr("placeholder",n);this.options.searchText=n};t.prototype.setSelectedClass=function(n){this.options.selectedClass=this.removeAddClass(".btn-icon-selected",this.options.selectedClass,n)};t.prototype.setUnselectedClass=function(n){this.options.unselectedClass=this.removeAddClass(".btn-icon",this.options.unselectedClass,n)};i=n.fn.iconpicker;n.fn.iconpicker=function(i,r){return this.each(function(){var u=n(this),f=u.data("bs.iconpicker"),s=typeof i=="object"&&i,e,o;if(f||u.data("bs.iconpicker",f=new t(this,s)),typeof i=="string")if(typeof f[i]=="undefined")throw'Iconpicker => The "'+i+'" method does not exists.';else f[i](r);else{e=f.options;e=n.extend(e,{page:1,selected:-1,table:n('<table class="table-icons"><thead><\/thead><tbody><\/tbody><tfoot><\/tfoot><\/table>')});o=typeof u.attr("name")!="undefined"?'name="'+u.attr("name")+'"':"";u.empty().append("<i><\/i>").append('<input type="hidden" '+o+"><\/input>").append('<span class="caret"><\/span>');u.addClass("iconpicker");f.setIconset(e.iconset);u.on("click",function(n){n.preventDefault();u.popover({animation:!1,trigger:"manual",html:!0,content:e.table,container:"body",placement:e.placement}).on("shown.bs.popover",function(){f.switchPage(e.icon);f.bindEvents()});u.data("bs.popover").tip().addClass("iconpicker-popover");u.popover("show")})}})};n.fn.iconpicker.Constructor=t;n.fn.iconpicker.noConflict=function(){return n.fn.iconpicker=i,this};n(document).on("click","body",function(t){n(".iconpicker").each(function(){n(this).is(t.target)||n(this).has(t.target).length!==0||n(".popover").has(t.target).length!==0||n(this).popover("destroy")})});n('button[role="iconpicker"]').iconpicker()})(jQuery);
//# sourceMappingURL=bootstrap-iconpicker.min.js.map
